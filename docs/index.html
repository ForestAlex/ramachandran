<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <title>MondeT Plot</title>
</head>
	
<body>
<script src="https://cdn.plot.ly/plotly-3.0.1.min.js"></script>
<h1>MondeT Plot </h1>
 <p>"Mond" is the German equivalent to the meaning of the surname Ramachandran. The Ramachandran plot translates to moon plot. The dihedral angels ϕ (phi) vs. ψ (psi), which are free angles of rotation of an amino acid in a protein backbone, can be plotted in a Ramachandran plot. The peptide bond angle w (omega) is restricted to mostly 180° due to the partial double-bond nature of the peptide connection. Three regions in the Ramachandran are often populated: The top left with β-strands and sheets, the bottom left with left-handed α-helices and the right middle with right-handed α-helices. The β-population is dominated by electrostatic forces, while the α-regions are preferred due to sterical benefit.    
</p>
<p>Play around with your favourite canonical amino acid background! Then, you can choose non-canonical amino acid candidates and compare their populated regions across structures. Do they explore novel parts of the fold landscapes? As an alternative mode, you can focus on only one structure. Play around how the fold from N-terminus to C-terminus spot by spot places the amino acids in backbone folds.</p>

<!-- Selection for IDs-->
  <input type="dropdown" list="list_ncaa" name="ncaa" id="ncaa" placeholder="Amino Acid ID">
  <datalist id="list_ncaa">
	<option value="YRV"><option value="3WX"><option value="FTR">
	<option value="ALC"><option value="200">
	<option value="HRG"><option value="NLE"><option value="OIC">
	<option value="WEH">
	<option value="WET">
	<option value="W4T">
	<option value="CRO">
	<option value="2TL">
	<option value="DSG">
	<option value="DSN">
	<option value="DAL">
	<option value="HTN">
	<option value="HVA">
	<option value="I2M">
	<option value="LMQ">
	<option value="M2S">
	<option value="MHE">
	<option value="DHV">
	<option value="MND">
	<option value="TBG">
	<option value="TDD">
  </datalist>

  <input type="dropdown" list="list_pdb" name="pdb" id="pdb" placeholder="PDB ID">
  <datalist id="list_pdb">
	<option value="6XIB">
	<option value="3Q4K">
	<option value="5VBL">
	<option value="8WM0">
	<option value="8OVY">
	<option value="2RQO">
  </datalist>
<!-- Checkboxes for canonical amino acids. Images to load faster.-->
<div id="canonical-checkboxes">
	<input type="checkbox" name="canonical_bg" value="ALL"> All amino acids
	<input type="checkbox" name="canonical_bg" value="ALA"> ALA
	<input type="checkbox" name="canonical_bg" value="ARG"> ARG
	<input type="checkbox" name="canonical_bg" value="ASN"> ASN
	<input type="checkbox" name="canonical_bg" value="ASP"> ASP
	<input type="checkbox" name="canonical_bg" value="CYS"> CYS
	<input type="checkbox" name="canonical_bg" value="GLN"> GLN
	<input type="checkbox" name="canonical_bg" value="GLU"> GLU
	<input type="checkbox" name="canonical_bg" value="GLY"> GLY
	<input type="checkbox" name="canonical_bg" value="HIS"> HIS
	<input type="checkbox" name="canonical_bg" value="ILE"> ILE
	<input type="checkbox" name="canonical_bg" value="LEU"> LEU
	<input type="checkbox" name="canonical_bg" value="LYS"> LYS
	<input type="checkbox" name="canonical_bg" value="MET"> MET
	<input type="checkbox" name="canonical_bg" value="PHE"> PHE
	<input type="checkbox" name="canonical_bg" value="PRO"> PRO
	<input type="checkbox" name="canonical_bg" value="SER"> SER
	<input type="checkbox" name="canonical_bg" value="THR"> THR
	<input type="checkbox" name="canonical_bg" value="TYR"> TYR
	<input type="checkbox" name="canonical_bg" value="TRP"> TRP
	<input type="checkbox" name="canonical_bg" value="VAL"> VAL
</div>

<input type="range" id="slider" min="10" max="100" value="50">
  <span id="slider-value">50</span>

  <div id="plot"></div>
  <script>
    // Beispiel-Daten
    function generateData(n) {
      let x = [], y = [];
      for (let i = 0; i < n; i++) {
        x.push(Math.random());
        y.push(Math.random());
      }
      return {x, y};
    }

    // Background nach kanonischer Auswahl
    function canonicalBackground () {
	return Array.from(document.querySelectorAll('input[name="canonical_bg"]:checked')).map(cb => cb.value);
    }

    // Daten
    const imgCanonicalBackground = canonicalBackground();
    const canonicalBackgroundImages = imgCanonicalBackground.map(idx => ({
	    source: `/images/bg${idx}.png`,
	    xref: "x",
	    yref: "y",
	    x: 0,
	    y: 1,
	    sizex: 1,
	    sizey: 1,
	    sizing: "stretch",
	    opacity: 0.2,
	    layer: "below"
    }));

    let layout = {
	width: 600,
	height: 600,
	xaxis: { range: [0, 1], scaleanchor: 'y', scaleratio: 1 },
	yaxis: { range: [0, 1] },
	images: canonicalBackgroundImages
    };

    // Plotly-Grafik
    function updatePlot(n) {
      let data = generateData(n);
      Plotly.newPlot('plot', [{
        x: data.x,
        y: data.y,
        mode: 'markers',
        type: 'scatter'
      }], layout);
    }
	
    // Initialer Plot
    updatePlot(50);
	  
    // Event-Listener: Slider-Event
    document.getElementById('slider').oninput = function() {
      let val = this.value;
      document.getElementById('slider-value').textContent = val;
      updatePlot(val);
    };

    // Event-Listener: Background-Image
    document.getElementById('canonical-checkboxes').addEventListener('change',
	function() {
		updatePlot(50);
	});

    // Initialer Plot
    updatePlot(50);
  </script>
</body>
</html>
